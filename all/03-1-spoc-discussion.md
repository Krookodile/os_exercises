# lec5 SPOC思考题


NOTICE
- 有"w3l1"标记的题是助教要提交到学堂在线上的。
- 有"w3l1"和"spoc"标记的题是要求拿清华学分的同学要在实体课上完成，并按时提交到学生对应的git repo上。
- 有"hard"标记的题有一定难度，鼓励实现。
- 有"easy"标记的题很容易实现，鼓励实现。
- 有"midd"标记的题是一般水平，鼓励实现。


## 个人思考题
---

请简要分析最优匹配，最差匹配，最先匹配，buddy systemm分配算法的优势和劣势，并尝试提出一种更有效的连续内存分配算法 (w3l1)
```
  + 采分点：说明四种算法的优点和缺点
  - 答案没有涉及如下3点；（0分）
  - 正确描述了二种分配算法的优势和劣势（1分）
  - 正确描述了四种分配算法的优势和劣势（2分）
  - 除上述两点外，进一步描述了一种更有效的分配算法（3分）
 ```
- [x]  

> 1. 最先匹配

>    优点：实现简单；在高地址空间中能留有大块的空闲分区，可以提供给某些需求较高的程序。

>    缺点：会留有外部碎片；当外部碎片越多，分配大块空间就越慢。

> 2. 最优匹配

>    优点：可避免空闲分区被拆分；可减小外部碎片的大小；实现相对简单。

>	 缺点：容易生成很多难以分配的小碎片；释放分区较慢。

> 3. 最差匹配

>    优点：中等大小的分配较多时效果最好；能避免出现太多的小碎片。

>    缺点：释放分区较慢；会产生外部碎片；由于每次寻找最大的空间，所以很容易破坏大分区，使得后续大需求程序难以分配到资源。

> 4. 伙伴系统

>    优点：空闲分区分配和回收速度快、算法简单。

>    缺点：内存利用率低效,主要是因为所有的内存请求都必须以2的幂次方大小的空间来满足。

> 5. 更有效的分配算法

>    对于小需求的程序采用最优分配，大需求的程序采用最差分配

## 小组思考题

请参考ucore lab2代码，采用`struct pmm_manager` 根据你的`学号 mod 4`的结果值，选择四种（0:最优匹配，1:最差匹配，2:最先匹配，3:buddy systemm）分配算法中的一种或多种，在应用程序层面(可以 用python,ruby,C++，C，LISP等高语言)来实现，给出你的设计思路，并给出测试用例。 (spoc)
>
